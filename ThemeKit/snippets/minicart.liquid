{% assign shipping_value = 0 %}
{% assign cart_total = cart.total_price %}
{% assign shipping_value_left = shipping_value | minus: cart_total %}


<button class="btn btn--primary" aria-controls="drawer-cart-id">Show Cart</button>

{% unless settings.cart_action == 'ajax' and template contains 'cart' %}
<div class="drawer drawer--modal dr-cart js-drawer js-drawer--modal" id="drawer-cart-id">
  <div class="drawer__content flex flex-column cart_content" role="alertdialog" aria-labelledby="drawer-cart-title">

    <header class="drawer__header">
      <h1 id="drawer-cart-title" class="text-truncate text-md">Your Cart<span class="font-normal color-contrast-medium">&nbsp;({{ cart.item_count }})</span></h1>
      <button class="reset drawer__close-btn js-tab-focus js-drawer__close aria-controls="drawer-cart-id"">
        <i class="icon--sm material-icons-outlined color-contrast-medium">close</i>
      </button>
    </header>

    <div class="drawer__body padding-x-md padding-y-sm js-drawer__body  position-relative">
    
      
      <!-- empty content -->
      <div class="js-empty-cart__message {% if cart.item_count > 0 %}hidden{% endif %}">
        <p class="empty_cart">{{ 'layout.general.empty_cart' | t }}</p>
      </div>

     
      <form action="/checkout" method="post" data-money-format="{{ shop.money_format }}" data-shop-currency="{{ shop.currency }}" data-shop-name="{{ shop.name | escape }}" class="js-cart_content__form {% if cart.item_count == 0 %}{% endif %}">
      <ol class="cart_items js-cart_items margin-top-md">

        {% assign total_saving = 0 %}
        {% for item in cart.items %}
        {% if item.variant.compare_at_price > item.variant.price %}
            {% assign saving = item.variant.compare_at_price | minus: item.variant.price | times: item.quantity %}
            {% assign total_saving = saving | plus: total_saving %}
        {% endif %}

          <li class="dr-cart__product cart_item ">
            {% if item.image %}
              <a href="{{ item.url }}" class="dr-cart__img">
                <img src="{{ item | img_url: '320x' }}" alt="{{ item.title | escape }}" class="lazyload" />
              </a>
              {% endif %}  

            <summary>
              <h2 class="text-base"><a href="{{ item.url }}" class="color-inherit">{{ item.product.title }} 
                {% unless item.product.has_only_default_variant or item.variant.title contains "Title" %} <!-- variant title -->
                <span class="font-normal color-contrast-medium">&nbsp;| 
                  {% for option in item.product.options %}
                    {{ item.variant.options[forloop.index0] }} {% unless forloop.last %}/{% endunless %}
                  {% endfor %}
                </span> 
                {% endunless %}
              </a></h2>
              <p class="text-sm color-contrast-medium margin-top-xxxs">{{ item.product.type }}</p>

              <div class="margin-top-xxxxs">

                <div class="left product-quantity-box">
                  <span class="ss-icon product-minus js-change-quantity" data-func="minus"><span class="icon-minus"></span></span>
                  <input type="number" min="1" size="2" class="quantity" name="updates[]" id="updates_{{ item.id }}" value="{{ item.quantity }}" data-line-id="{{ forloop.index }}" />
                  <span class="ss-icon product-plus js-change-quantity" data-func="plus"><span class="icon-plus"></span></span>
                </div>

              </div>
            </summary>

            <div class="flex flex-column align-end justify-between height-100%">
              <i class="dr-cart__remove-btn icon--sm material-icons-outlined color-contrast-low">delete</i>
              <summary class="flex flex-column text-right">
                <span class="color-contrast-higher {% if item.price < item.variant.compare_at_price %}sale{% endif %}">{{ item.price | money }}</span>
                {% if item.price < item.variant.compare_at_price %}
                  <span class="money was_price mtn5">{{ item.variant.compare_at_price | money }}</span>
                {% endif %}
              </summary>
            </div>

          </li>

        {% endfor %}
      </ol>
    </form>
    </div>


    <footer class="padding-x-md padding-y-sm border-top border-contrast-lower flex-shrink-0">
      <p class="flex justify-between js-cart_subtotal"><span>{{ 'layout.general.subtotal' | t }}</span> <span>{{ cart.total_price | money }}</span></p>
      <p class="flex justify-between"><span>Shipping</span> <span>Free</span></p>
      {% if settings.go_to_checkout %}
        <button type="submit" class="add_to_cart action_button btn btn--primary btn--md width-100% margin-y-xs" id="checkout">{% if settings.show_lock_icon %}<span class="material-icons-outlined icon-lock"></span>{% endif %}{{ 'layout.general.checkout' | t }}</button>
      {% else %}
        <button type="submit" class="add_to_cart action_button btn btn--primary btn--md width-100% margin-y-xs" id="go_to_cart">{% if settings.show_lock_icon %}<span class="material-icons-outlined icon-lock"></span>{% endif %}{{ 'layout.general.go_to_cart' | t }} </button>
      {% endif %}
      <p class="affirm-as-low-as inline-block width-100% margin-y-xs" data-page-type="cart" data-amount="{{cart.total_price}}" data-affirm-type="text" data-learnmore-show="true"></p>
    </footer>
  </div>
</div>

{% endunless %}

